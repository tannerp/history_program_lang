<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Network Graph of Programming Languages</title>
  <meta name="description" content="Network Graph of Program Languages">
  <meta name="author" content="Tanner Phan">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
  </script>

  <!-- <script src="./d3.min.js"></script> -->
  <script src="https://d3js.org/d3.v3.js"></script>

  <script src="./jsnetworkx.js"></script>


</head>

<body>
  <!-- <script src="js/scripts.js"></script> -->
  <h1> Network Graph of Program Languages</h1>

  <div id="chart3"></div>

  <div id='slider' class="slider close">
    <h3 id='lang_title'></h3>
  </div>
</body>

<style>
  h1 {
    text-align: center;
    color: orange;
  }

  .slider {
    background-color: orange;
    position: absolute;
    width: 100vw;
    bottom: 0;
    height: 20vh;
    overflow: hidden;
    transition: all 1s;
  }

  .slider.close {
    bottom: 0;
    height: 0;
    transition: all 1s;
  }

  body {
    font-family: Helvetica;
    padding-top: 3%;
  }

  #chart3,
  .jsnx {
    margin-left: auto;
    margin-right: auto;
    width: 90vw;
    height: 70vh;
    background-color: white;
  }
</style>
<script>
  let selct_lang;
  var G3 = new jsnx.DiGraph();

  // patients are green
  G3.addNodesFrom([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], {
    group: 0,
    color: 'orange'
  });
  // symptoms are red
  G3.addNodesFrom(
    [
      [21, {
        name: "dry mouth"
      }],
      [22, {
        name: "dry lips "
      }],
      [23, {
        name: "dry nose"
      }],
      [24, {
        name: "dry skin"
      }],
      [25, {
        name: "brittle nails"
      }],
      [26, {
        name: "pruritus"
      }],
      [27, {
        name: "hair loss"
      }],
      [28, {
        name: "depression"
      }],
      [29, {
        name: "dry eyes"
      }],
      [30, {
        name: "fatigue"
      }],
      [31, {
        name: "hypertriglyceridemia"
      }],
      [32, {
        name: "vertigo"
      }],
      [33, {
        name: "GI upset"
      }],
      [34, {
        name: "facial redness"
      }],
      [35, {
        name: "weight loss"
      }]
    ], {
      group: 0,
      // size: 40,
      // color: 'orange'
    });


  edges = [];
  edges.push([
    [1, 23],
    [1, 25],
    [1, 21],
    [1, 25],
    [2, 30],
    [2, 22],
    [2, 21],
    [3, 21],
    [4, 21],
    [4, 27],
    [5, 31],
    [5, 28],
    [5, 32],
    [5, 29],
    [5, 22],
    [5, 25],
    [6, 24],
    [6, 33],
    [7, 22],
    [7, 24],
    [7, 26],
    [8, 34],
    [8, 35],
    [9, 24],
    [9, 22],
    [9, 25],
    [10, 26],
    [11, 22],
    [11, 25],
    [12, 26],
    [13, 27],
    [13, 22],
    [13, 23],
    [13, 25],
    [14, 27],
    [14, 28],
    [14, 23],
    [15, 22],
    [15, 27],
    [16, 22],
    [16, 26],
    [17, 22],
    [17, 27],
    [17, 25],
    [18, 22],
    [18, 29],
    [19, 22],
    [20, 25],
    [20, 22],
    [20, 21]
  ]);



  G3.addEdgesFrom(edges[0]);


  // var color = d3.scale.category20();

  jsnx.draw(G3, {
    element: '#chart3',
    withLabels: true,
    labels: "name",
    layout_attr: {
      charge: -150,
      linkDistance: 50
    },
    labelStyle: {
      fill: 'black'
    },
    nodeStyle: {
      fill: function (d) {
        return d.data.color;
      }
    },
    node_attr: {
      r: 30,
      title: function (d) {
        return d.name;
      },
      id: function (d) {
        return 'node-' + d.node;
      }
    },
    // node_style: {
    //   fill: function (d) {
    //     return "orange"
    //     // console.log(d.data.color);
    //     // return d.data.color;
    //   },
    //   stroke: 'orange'
    // },
    // edge_style: {
    //   color: "orange",
    //   stroke: '#febb2f'
    // }
  }, true);


  function update_select_lang(lang){

    let el = document.getElementById("slider");
    
    el.classList.remove("close")
    
    document.getElementById("lang_title").innerText = lang.data.name
    console.log(lang.data.name)
    console.log(document.getElementById("lang_title"))
  }

  function highlight_nodes(nodes, on) {
    nodes.forEach(function (n) {
      d3.select('#node-' + n).style('fill', function (d) {
        return on ? '#febb2f' : d.data.color;
      });
    });
  }

  d3.selectAll('.node').on('click', function (d) {
    highlight_nodes(d.G.neighbors(d.node).concat(d.node), true);

    update_select_lang(d);

    // console.log(d)
  });

  // d3.selectAll('.node').on('mouseout', function (d) {
  //   highlight_nodes(d.G.neighbors(d.node).concat(d.node), false);
  // });

  // });
</script>

</html>